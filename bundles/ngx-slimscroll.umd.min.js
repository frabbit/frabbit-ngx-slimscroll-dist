!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-slimscroll",["exports","@angular/core","@angular/common","rxjs","rxjs/operators"],e):e((t=t||self)["ngx-slimscroll"]={},t.ng.core,t.ng.common,t.rxjs,t.rxjs.operators)}(this,(function(t,e,i,r,n){"use strict";var o=function(t){this.type=t.type,this.y=t&&t.y?t.y:0,this.percent=t&&t.percent?t.percent:0,this.duration=t&&t.duration?t.duration:0,this.easing=t&&t.easing?t.easing:"linear"},s=new e.InjectionToken("NGX_SLIMSCROLL_DEFAULTS"),a=function(){function t(t){this.position=t&&t.position?t.position:"right",this.barBackground=t&&t.barBackground?t.barBackground:"#343a40",this.barOpacity=t&&t.barOpacity?t.barOpacity:"1",this.barWidth=t&&t.barWidth?t.barWidth:"12",this.barBorderRadius=t&&t.barBorderRadius?t.barBorderRadius:"5",this.barMargin=t&&t.barMargin?t.barMargin:"1px 0",this.gridBackground=t&&t.gridBackground?t.gridBackground:"#adb5bd",this.gridOpacity=t&&t.gridOpacity?t.gridOpacity:"1",this.gridWidth=t&&t.gridWidth?t.gridWidth:"8",this.gridBorderRadius=t&&t.gridBorderRadius?t.gridBorderRadius:"10",this.gridMargin=t&&t.gridMargin?t.gridMargin:"1px 2px",this.alwaysVisible=!t||void 0===t.alwaysVisible||t.alwaysVisible,this.visibleTimeout=t&&t.visibleTimeout?t.visibleTimeout:1e3}return t.prototype.merge=function(e){var i=new t;return i.position=e&&e.position?e.position:this.position,i.barBackground=e&&e.barBackground?e.barBackground:this.barBackground,i.barOpacity=e&&e.barOpacity?e.barOpacity:this.barOpacity,i.barWidth=e&&e.barWidth?e.barWidth:this.barWidth,i.barBorderRadius=e&&e.barBorderRadius?e.barBorderRadius:this.barBorderRadius,i.barMargin=e&&e.barMargin?e.barMargin:this.barMargin,i.gridBackground=e&&e.gridBackground?e.gridBackground:this.gridBackground,i.gridOpacity=e&&e.gridOpacity?e.gridOpacity:this.gridOpacity,i.gridWidth=e&&e.gridWidth?e.gridWidth:this.gridWidth,i.gridBorderRadius=e&&e.gridBorderRadius?e.gridBorderRadius:this.gridBorderRadius,i.gridMargin=e&&e.gridMargin?e.gridMargin:this.gridMargin,i.alwaysVisible=e&&void 0!==e.alwaysVisible?e.alwaysVisible:this.alwaysVisible,i.visibleTimeout=e&&e.visibleTimeout?e.visibleTimeout:this.visibleTimeout,i},t}(),l=function(t){this.scrollPosition=t&&t.scrollPosition?t.scrollPosition:0,this.isScrollAtStart=!t||void 0===t.isScrollAtStart||t.isScrollAtStart,this.isScrollAtEnd=!(!t||void 0===t.isScrollAtEnd)&&t.isScrollAtEnd},d=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},h=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=this&&this.__param||function(t,e){return function(i,r){e(i,r,t)}},c=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t},g=function(t){return t},y=function(t){return t*t},f=function(t){return t*(2-t)},b=function(t){return t<.5?2*t*t:(4-2*t)*t-1},m=function(t){return t*t*t},v=function(t){return--t*t*t+1},S=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},O=function(t){return t*t*t*t},w=function(t){return 1- --t*t*t*t},B=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},T=function(t){return t*t*t*t*t},E=function(t){return 1+--t*t*t*t*t},C=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},M={linear:g,inQuad:y,outQuad:f,inOutQuad:b,inCubic:m,outCubic:v,inOutCubic:S,inQuart:O,outQuart:w,inOutQuart:B,inQuint:T,outQuint:E,inOutQuint:C},R=function(){function t(t,i,o,s){var a=this;this.viewContainer=t,this.renderer=i,this.document=o,this.optionsDefaults=s,this.enabled=!0,this.scrollChanged=new e.EventEmitter,this.barVisibilityChange=new e.EventEmitter,this.initWheel=function(){var t=r.fromEvent(a.el,"DOMMouseScroll"),e=r.fromEvent(a.el,"mousewheel"),i=r.merge.apply(void 0,u([t,e])).subscribe((function(t){var e=0;t.wheelDelta&&(e=-t.wheelDelta/120),t.detail&&(e=t.detail/3),a.scrollContent(e,!0,!1),t.preventDefault&&t.preventDefault()}));a.interactionSubscriptions.add(i)},this.initDrag=function(){var t=a.bar,e=r.fromEvent(a.document.documentElement,"mousemove"),i=r.fromEvent(a.document.documentElement,"touchmove"),o=r.fromEvent(t,"mousedown"),s=r.fromEvent(a.el,"touchstart"),l=r.fromEvent(a.document.documentElement,"mouseup"),d=r.fromEvent(a.document.documentElement,"touchend"),h=o.pipe(n.mergeMap((function(i){return a.pageY=i.pageY,a.top=parseFloat(getComputedStyle(t).top),e.pipe(n.map((function(t){return t.preventDefault(),a.top+t.pageY-a.pageY})),n.takeUntil(l))}))),p=s.pipe(n.mergeMap((function(e){return a.pageY=e.targetTouches[0].pageY,a.top=-parseFloat(getComputedStyle(t).top),i.pipe(n.map((function(t){return-(a.top+t.targetTouches[0].pageY-a.pageY)})),n.takeUntil(d))}))),c=r.merge.apply(void 0,u([h,p])).subscribe((function(t){a.body.addEventListener("selectstart",a.preventDefaultEvent,!1),a.renderer.setStyle(a.body,"touch-action","pan-y"),a.renderer.setStyle(a.body,"user-select","none"),a.renderer.setStyle(a.bar,"top",t+"px");var e=a.scrollContent(0,!0,!1),i=a.el.offsetHeight-a.bar.offsetHeight;e&&e<0&&-e<=i?a.renderer.setStyle(a.el,"paddingTop",-e+"px"):e&&e>0&&e<=i&&a.renderer.setStyle(a.el,"paddingBottom",e+"px")})),g=r.merge.apply(void 0,u([l,d])).subscribe((function(){a.body.removeEventListener("selectstart",a.preventDefaultEvent,!1);var t=parseInt(a.el.style.paddingTop,10),e=parseInt(a.el.style.paddingBottom,10);a.renderer.setStyle(a.body,"touch-action","unset"),a.renderer.setStyle(a.body,"user-select","default"),t>0?a.scrollTo(0,300,"linear"):e>0&&a.scrollTo(0,300,"linear")}));a.interactionSubscriptions.add(c),a.interactionSubscriptions.add(g)},this.preventDefaultEvent=function(t){t.preventDefault(),t.stopPropagation()},this.viewContainer=t,this.el=t.element.nativeElement,this.body=this.document.querySelector("body"),this.mutationThrottleTimeout=50}return t.prototype.ngOnInit=function(){!this.interactionSubscriptions&&this.enabled&&this.setup()},t.prototype.ngOnChanges=function(t){t.enabled&&(this.enabled?this.setup():this.destroy())},t.prototype.ngOnDestroy=function(){this.destroy()},t.prototype.setup=function(){var t=this;if(this.interactionSubscriptions=new r.Subscription,this.optionsDefaults?this.options=new a(this.optionsDefaults).merge(this.options):this.options=new a(this.options),this.setStyle(),this.wrapContainer(),this.initGrid(),this.initBar(),this.getBarHeight(),this.initWheel(),this.initDrag(),this.options.alwaysVisible||this.hideBarAndGrid(),MutationObserver&&(this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver((function(){t.mutationThrottleTimeout&&(clearTimeout(t.mutationThrottleTimeout),t.mutationThrottleTimeout=setTimeout(t.onMutation.bind(t),50))})),this.mutationObserver.observe(this.el,{subtree:!0,childList:!0})),this.scrollEvents&&this.scrollEvents instanceof e.EventEmitter){var i=this.scrollEvents.subscribe((function(e){return t.handleEvent(e)}));this.interactionSubscriptions.add(i)}},t.prototype.handleEvent=function(t){if("scrollToBottom"===t.type){var e=this.el.scrollHeight-this.el.clientHeight;this.scrollTo(e,t.duration,t.easing)}else if("scrollToTop"===t.type){e=0;this.scrollTo(e,t.duration,t.easing)}else if("scrollToPercent"===t.type&&t.percent>=0&&t.percent<=100){e=Math.round((this.el.scrollHeight-this.el.clientHeight)/100*t.percent);this.scrollTo(e,t.duration,t.easing)}else if("scrollTo"===t.type){(e=t.y)<=this.el.scrollHeight-this.el.clientHeight&&e>=0&&this.scrollTo(e,t.duration,t.easing)}else"recalculate"===t.type&&this.getBarHeight()},t.prototype.setStyle=function(){var t=this.el;this.renderer.setStyle(t,"overflow","hidden"),this.renderer.setStyle(t,"position","relative"),this.renderer.setStyle(t,"display","block")},t.prototype.onMutation=function(){this.getBarHeight()},t.prototype.wrapContainer=function(){this.wrapper=this.renderer.createElement("div");var t=this.wrapper,e=this.el;this.renderer.addClass(t,"slimscroll-wrapper"),this.renderer.setStyle(t,"position","relative"),this.renderer.setStyle(t,"overflow","hidden"),this.renderer.setStyle(t,"display","inline-block"),this.renderer.setStyle(t,"margin",getComputedStyle(e).margin),this.renderer.setStyle(t,"width","100%"),this.renderer.setStyle(t,"height",getComputedStyle(e).height),this.renderer.insertBefore(e.parentNode,t,e),this.renderer.appendChild(t,e)},t.prototype.initGrid=function(){this.grid=this.renderer.createElement("div");var t=this.grid;this.renderer.addClass(t,"slimscroll-grid"),this.renderer.setStyle(t,"position","absolute"),this.renderer.setStyle(t,"top","0"),this.renderer.setStyle(t,"bottom","0"),this.renderer.setStyle(t,this.options.position,"0"),this.renderer.setStyle(t,"width",this.options.gridWidth+"px"),this.renderer.setStyle(t,"background",this.options.gridBackground),this.renderer.setStyle(t,"opacity",this.options.gridOpacity),this.renderer.setStyle(t,"display","block"),this.renderer.setStyle(t,"cursor","pointer"),this.renderer.setStyle(t,"z-index","99"),this.renderer.setStyle(t,"border-radius",this.options.gridBorderRadius+"px"),this.renderer.setStyle(t,"margin",this.options.gridMargin),this.renderer.appendChild(this.wrapper,t)},t.prototype.initBar=function(){this.bar=this.renderer.createElement("div");var t=this.bar;this.renderer.addClass(t,"slimscroll-bar"),this.renderer.setStyle(t,"position","absolute"),this.renderer.setStyle(t,"top","0"),this.renderer.setStyle(t,this.options.position,"0"),this.renderer.setStyle(t,"width",this.options.barWidth+"px"),this.renderer.setStyle(t,"background",this.options.barBackground),this.renderer.setStyle(t,"opacity",this.options.barOpacity),this.renderer.setStyle(t,"display","block"),this.renderer.setStyle(t,"cursor","pointer"),this.renderer.setStyle(t,"z-index","100"),this.renderer.setStyle(t,"border-radius",this.options.barBorderRadius+"px"),this.renderer.setStyle(t,"margin",this.options.barMargin),this.renderer.appendChild(this.wrapper,t),this.barVisibilityChange.emit(!0)},t.prototype.getBarHeight=function(){var t=this.el.offsetHeight,e=Math.max(t/this.el.scrollHeight*t,30)+"px",i=parseInt(e,10)===t?"none":"block";this.wrapper.offsetHeight!==t&&this.renderer.setStyle(this.wrapper,"height",t+"px"),this.renderer.setStyle(this.bar,"height",e),this.renderer.setStyle(this.bar,"display",i),this.renderer.setStyle(this.grid,"display",i),this.barVisibilityChange.emit("none"!==i)},t.prototype.scrollTo=function(t,e,i){var r=this,n=Date.now(),o=this.el.scrollTop,s=(this.el.offsetHeight,this.bar.offsetHeight,this.el.scrollHeight-this.el.clientHeight),a=Math.max(this.el.offsetHeight/this.el.scrollHeight*this.el.offsetHeight,30),l=parseInt(this.el.style.paddingTop,10)||0,d=parseInt(this.el.style.paddingBottom,10)||0,h=function(p){var c=Date.now(),u=Math.min(1,(c-n)/e),g=M[i](u);if(l>0||d>0){var y=null;l>0&&(y=-(g*(t-(y=-l))+y),r.renderer.setStyle(r.el,"paddingTop",y+"px")),d>0&&(y=g*(t-(y=d))+y,r.renderer.setStyle(r.el,"paddingBottom",y+"px"))}else r.el.scrollTop=g*(t-o)+o;var f=r.el.scrollTop/s;if(0===d){var b=Math.round(Math.round(r.el.clientHeight*f)-a);b>0&&r.renderer.setStyle(r.bar,"top",b+"px")}u<1&&requestAnimationFrame(h)};requestAnimationFrame(h)},t.prototype.scrollContent=function(t,e,i){var r=this,n=t,o=this.el.offsetHeight-this.bar.offsetHeight,s=this.el.scrollHeight-this.el.offsetHeight,a=null;e&&(((n=parseInt(getComputedStyle(this.bar).top,10)+20*t/100*this.bar.offsetHeight)<0||n>o)&&(a=n>o?n-o:n),n=Math.min(Math.max(n,0),o),n=t>0?Math.ceil(n):Math.floor(n),this.renderer.setStyle(this.bar,"top",n+"px")),n=parseInt(getComputedStyle(this.bar).top,10)/(this.el.offsetHeight-this.bar.offsetHeight)*s,this.el.scrollTop=n,this.showBarAndGrid(),this.options.alwaysVisible||(this.visibleTimeout&&clearTimeout(this.visibleTimeout),this.visibleTimeout=setTimeout((function(){r.hideBarAndGrid()}),this.options.visibleTimeout));var d=0===n,h=n===s,p=Math.ceil(n),c=new l({scrollPosition:p,isScrollAtStart:d,isScrollAtEnd:h});return this.scrollChanged.emit(c),a},t.prototype.showBarAndGrid=function(){this.renderer.setStyle(this.grid,"background",this.options.gridBackground),this.renderer.setStyle(this.bar,"background",this.options.barBackground)},t.prototype.hideBarAndGrid=function(){this.renderer.setStyle(this.grid,"background","transparent"),this.renderer.setStyle(this.bar,"background","transparent")},t.prototype.destroy=function(){if(this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.el.parentElement.classList.contains("slimscroll-wrapper")){var t=this.el.parentElement,e=t.querySelector(".slimscroll-bar");t.removeChild(e);var i=t.querySelector(".slimscroll-grid");t.removeChild(i),this.unwrap(t)}this.interactionSubscriptions&&this.interactionSubscriptions.unsubscribe()},t.prototype.unwrap=function(t){for(var e=document.createDocumentFragment();t.firstChild;){var i=t.removeChild(t.firstChild);e.appendChild(i)}t.parentNode.replaceChild(e,t)},t.prototype.onResize=function(t){this.getBarHeight()},t.ctorParameters=function(){return[{type:e.ViewContainerRef,decorators:[{type:e.Inject,args:[e.ViewContainerRef]}]},{type:e.Renderer2,decorators:[{type:e.Inject,args:[e.Renderer2]}]},{type:void 0,decorators:[{type:e.Inject,args:[i.DOCUMENT]}]},{type:void 0,decorators:[{type:e.Inject,args:[s]},{type:e.Optional}]}]},d([e.Input(),h("design:type",Object)],t.prototype,"enabled",void 0),d([e.Input(),h("design:type",a)],t.prototype,"options",void 0),d([e.Input(),h("design:type",e.EventEmitter)],t.prototype,"scrollEvents",void 0),d([e.Output(),h("design:type",Object)],t.prototype,"scrollChanged",void 0),d([e.Output(),h("design:type",Object)],t.prototype,"barVisibilityChange",void 0),d([e.HostListener("window:resize",["$event"]),h("design:type",Function),h("design:paramtypes",[Object]),h("design:returntype",void 0)],t.prototype,"onResize",null),t=d([e.Directive({selector:"[slimScroll]",exportAs:"slimScroll"}),p(0,e.Inject(e.ViewContainerRef)),p(1,e.Inject(e.Renderer2)),p(2,e.Inject(i.DOCUMENT)),p(3,e.Inject(s)),p(3,e.Optional()),h("design:paramtypes",[e.ViewContainerRef,e.Renderer2,Object,Object])],t)}(),x=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},k=function(){function t(){}return t=x([e.NgModule({declarations:[R],exports:[R]})],t)}();t.NgSlimScrollModule=k,t.SLIMSCROLL_DEFAULTS=s,t.SlimScrollDirective=R,t.SlimScrollEvent=o,t.SlimScrollOptions=a,t.easing=M,t.ɵ0=g,t.ɵ1=y,t.ɵ10=T,t.ɵ11=E,t.ɵ12=C,t.ɵ2=f,t.ɵ3=b,t.ɵ4=m,t.ɵ5=v,t.ɵ6=S,t.ɵ7=O,t.ɵ8=w,t.ɵ9=B,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-slimscroll.umd.min.js.map